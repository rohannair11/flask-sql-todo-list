{% extends "base.html" %}
{% block content %}

<div class="app-shell">

    <header class="header">
        <h1>Todo List App</h1>
        <a href="/export" class="export">Export CSV</a>
    </header>

    <div class="layout">

        <div class="left">

            <form method="POST" class="card">
                <h3>New Task</h3>

                <div class="form-group">
                    <label>Title</label>
                    <input type="text" name="title" maxlength="100" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" maxlength="500" required></textarea>
                </div>

                <div class="form-group">
                    <label>Priority</label>
                    <select name="priority">
                        <option>Low</option>
                        <option selected>Medium</option>
                        <option>High</option>
                    </select>
                </div>

                <button type="submit">Add Task</button>
            </form>

        </div>

        <div class="right">

            <h3 class="section-title">To Do</h3>

            {% for task in todo_tasks %}
            <div class="task">
                <div class="task-left">
                    <strong>{{ task[1] }}</strong>
                    <small>{{ task[2] }}</small>
                    <span class="time">{{ task[5] }}</span>
                </div>

                <div class="task-right">
                    <span class="priority {{ task[3]|lower }}">{{ task[3] }}</span>
                    <a href="/edit/{{ task[0] }}">Edit</a>
                    <a href="/done/{{ task[0] }}">Done</a>
                    <a href="/delete/{{ task[0] }}" class="danger">Delete</a>
                </div>
            </div>
            {% endfor %}

            <h3 class="section-title" style="margin-top:40px;">Done</h3>

            {% for task in done_tasks %}
            <div class="task" style="opacity:0.6;">
                <div class="task-left">
                    <strong>{{ task[1] }}</strong>
                    <small>{{ task[2] }}</small>
                    <span class="time">{{ task[5] }}</span>
                </div>

                <div class="task-right">
                    <span class="priority {{ task[3]|lower }}">{{ task[3] }}</span>
                    <a href="/undo/{{ task[0] }}">Undo</a>
                    <a href="/delete/{{ task[0] }}" class="danger">Delete</a>
                </div>
            </div>
            {% endfor %}

        </div>

    </div>

</div>

{% endblock %}
